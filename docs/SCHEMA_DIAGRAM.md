# PremStats Database Schema Visual Diagram

## Entity Relationship Diagram

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           PREMSTATS DATABASE SCHEMA                                    â”‚
â”‚                          PostgreSQL 16 - 11,944 Matches                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     SEASONS     â”‚       â”‚      TEAMS      â”‚       â”‚     MATCHES     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚   â”Œâ”€â”€â”€â”‚ id (PK)         â”‚   â”Œâ”€â”€â”€â”‚ id (PK)         â”‚
â”‚ name (UK)       â”‚   â”‚   â”‚ name (UK)       â”‚   â”‚   â”‚ season_id (FK)  â”‚â”€â”€â”
â”‚ start_date      â”‚   â”‚   â”‚ short_name      â”‚   â”‚   â”‚ home_team_id    â”‚â”€â”€â”¼â”€â”€â”
â”‚ end_date        â”‚   â”‚   â”‚ stadium         â”‚   â”‚   â”‚ away_team_id    â”‚â”€â”€â”¼â”€â”€â”¤
â”‚ year            â”‚   â”‚   â”‚ founded         â”‚   â”‚   â”‚ match_date      â”‚  â”‚  â”‚
â”‚ team_count      â”‚   â”‚   â”‚ external_id     â”‚   â”‚   â”‚ home_score      â”‚  â”‚  â”‚
â”‚ created_at      â”‚   â”‚   â”‚ crest_url       â”‚   â”‚   â”‚ away_score      â”‚  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚ created_at      â”‚   â”‚   â”‚ half_time_home  â”‚  â”‚  â”‚
         â”‚            â”‚   â”‚ updated_at      â”‚   â”‚   â”‚ half_time_away  â”‚  â”‚  â”‚
         â”‚            â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚ status          â”‚  â”‚  â”‚
         â”‚            â”‚            â”‚            â”‚   â”‚ matchday        â”‚  â”‚  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ referee         â”‚  â”‚  â”‚
                      â”‚            â”‚                â”‚ attendance      â”‚  â”‚  â”‚
                      â”‚            â”‚                â”‚ external_id     â”‚  â”‚  â”‚
                      â”‚            â”‚                â”‚ created_at      â”‚  â”‚  â”‚
                      â”‚            â”‚                â”‚ updated_at      â”‚  â”‚  â”‚
                      â”‚            â”‚                â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
                      â”‚            â”‚                         â”‚           â”‚  â”‚
                      â”‚            â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                      â”‚                                      â”‚              â”‚
                      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                                             â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚     PLAYERS     â”‚       â”‚      GOALS      â”‚       â”‚   STANDINGS     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚   â”Œâ”€â”€â”€â”‚ id (PK)         â”‚       â”‚ id (PK)         â”‚
â”‚ name            â”‚   â”‚   â”‚ match_id (FK)   â”‚â”€â”€â”€â”€â”€â”€â”€â”‚ season_id (FK)  â”‚â”€â”€â”
â”‚ date_of_birth   â”‚   â”‚   â”‚ player_id (FK)  â”‚â”€â”€â”    â”‚ team_id (FK)    â”‚â”€â”€â”¼â”€â”€â”
â”‚ nationality     â”‚   â”‚   â”‚ team_id (FK)    â”‚â”€â”€â”¼â”€â”  â”‚ position        â”‚  â”‚  â”‚
â”‚ position        â”‚   â”‚   â”‚ minute          â”‚  â”‚ â”‚  â”‚ played          â”‚  â”‚  â”‚
â”‚ created_at      â”‚   â”‚   â”‚ is_own_goal     â”‚  â”‚ â”‚  â”‚ won             â”‚  â”‚  â”‚
â”‚ updated_at      â”‚   â”‚   â”‚ is_penalty      â”‚  â”‚ â”‚  â”‚ drawn           â”‚  â”‚  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚ created_at      â”‚  â”‚ â”‚  â”‚ lost            â”‚  â”‚  â”‚
         â”‚            â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚  â”‚ goals_for       â”‚  â”‚  â”‚
         â”‚            â”‚            â”‚           â”‚ â”‚  â”‚ goals_against   â”‚  â”‚  â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚           â”‚ â”‚  â”‚ goal_difference â”‚  â”‚  â”‚
                                   â”‚           â”‚ â”‚  â”‚ points          â”‚  â”‚  â”‚
                                   â”‚           â”‚ â”‚  â”‚ form            â”‚  â”‚  â”‚
                                   â”‚           â”‚ â”‚  â”‚ date            â”‚  â”‚  â”‚
                                   â”‚           â”‚ â”‚  â”‚ updated_at      â”‚  â”‚  â”‚
                                   â”‚           â”‚ â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚  â”‚
                                   â”‚           â”‚ â”‚           â”‚          â”‚  â”‚
                                   â”‚           â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                                   â”‚           â”‚             â”‚             â”‚
                                   â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                   â”‚                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  PLAYER_STATS   â”‚       â”‚  TEAM_SEASONS   â”‚       â”‚    INDEXES      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)         â”‚       â”‚ id (PK)         â”‚       â”‚ idx_matches_dateâ”‚
â”‚ player_id (FK)  â”‚â”€â”€â”    â”‚ team_id (FK)    â”‚â”€â”€â”€â”€â”€â”€â”€â”‚ idx_matches_    â”‚
â”‚ season_id (FK)  â”‚â”€â”€â”¼â”€â”  â”‚ season_id (FK)  â”‚â”€â”€â”€â”   â”‚ season          â”‚
â”‚ team_id (FK)    â”‚â”€â”€â”¼â”€â”¼â”€â”â”‚ division        â”‚   â”‚   â”‚ idx_goals_match â”‚
â”‚ appearances     â”‚  â”‚ â”‚ â”‚â”‚ final_position  â”‚   â”‚   â”‚ idx_goals_playerâ”‚
â”‚ goals           â”‚  â”‚ â”‚ â”‚â”‚ promoted        â”‚   â”‚   â”‚ idx_standings_  â”‚
â”‚ assists         â”‚  â”‚ â”‚ â”‚â”‚ relegated       â”‚   â”‚   â”‚ season          â”‚
â”‚ yellow_cards    â”‚  â”‚ â”‚ â”‚â”‚ created_at      â”‚   â”‚   â”‚ idx_player_     â”‚
â”‚ red_cards       â”‚  â”‚ â”‚ â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚   â”‚ stats_season    â”‚
â”‚ created_at      â”‚  â”‚ â”‚ â”‚          â”‚           â”‚   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚ updated_at      â”‚  â”‚ â”‚ â”‚          â”‚           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚ â”‚          â”‚           â”‚
         â”‚           â”‚ â”‚ â”‚          â”‚           â”‚
         â”‚           â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         â”‚           â”‚ â”‚            â”‚
         â”‚           â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
         â”‚           â”‚              â”‚                                 â”‚
         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚                                 â”‚
                                    â”‚                                 â”‚
                                    â”‚                                 â”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  RELATIONSHIPS                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ â€¢ SEASONS (1) â”€â”€â†’ (âˆ) MATCHES       â€¢ TEAMS (1) â”€â”€â†’ (âˆ) MATCHES (home/away)           â”‚
â”‚ â€¢ SEASONS (1) â”€â”€â†’ (âˆ) STANDINGS     â€¢ TEAMS (1) â”€â”€â†’ (âˆ) STANDINGS                     â”‚
â”‚ â€¢ SEASONS (1) â”€â”€â†’ (âˆ) PLAYER_STATS  â€¢ TEAMS (1) â”€â”€â†’ (âˆ) PLAYER_STATS                  â”‚
â”‚ â€¢ SEASONS (1) â”€â”€â†’ (âˆ) TEAM_SEASONS  â€¢ TEAMS (1) â”€â”€â†’ (âˆ) TEAM_SEASONS                  â”‚
â”‚ â€¢ MATCHES (1) â”€â”€â†’ (âˆ) GOALS         â€¢ TEAMS (1) â”€â”€â†’ (âˆ) GOALS                         â”‚
â”‚ â€¢ PLAYERS (1) â”€â”€â†’ (âˆ) GOALS         â€¢ PLAYERS (1) â”€â”€â†’ (âˆ) PLAYER_STATS                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                  DATA SUMMARY                                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ† Seasons: 32 with data (1993/94 - 2024/25)    ğŸ“Š Matches: 11,944 historical        â”‚
â”‚ âš½ Teams: 50+ including historical clubs          ğŸ¯ Goals: Ready for import            â”‚
â”‚ ğŸ‘¥ Players: Schema ready for future data         ğŸ“ˆ Stats: Live calculation via API    â”‚
â”‚ ğŸŸï¸  Stadiums: Tracked in teams table            ğŸ”„ Updates: Manual refresh system     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Table Relationships Detail

### Core Data Flow
```
SEASONS â”€â”€â”¬â”€â†’ MATCHES â”€â”€â†’ GOALS
          â”œâ”€â†’ STANDINGS
          â”œâ”€â†’ PLAYER_STATS  
          â””â”€â†’ TEAM_SEASONS

TEAMS â”€â”€â”€â”€â”¬â”€â†’ MATCHES (home/away)
          â”œâ”€â†’ GOALS
          â”œâ”€â†’ STANDINGS
          â”œâ”€â†’ PLAYER_STATS
          â””â”€â†’ TEAM_SEASONS

PLAYERS â”€â”€â”¬â”€â†’ GOALS
          â””â”€â†’ PLAYER_STATS
```

### Key Constraints
```
ğŸ”‘ Primary Keys: All tables have auto-increment integer PKs
ğŸ”— Foreign Keys: All relationships enforced with FK constraints  
ğŸ·ï¸  Unique Keys: team names, season names, external IDs
ğŸ“ Defaults: Statistical fields default to 0, booleans to false
â° Timestamps: Automatic creation/update tracking
```

### Performance Features
```
ğŸ“Š Indexes:
   â€¢ matches(match_date, season_id) - Fast date/season queries
   â€¢ goals(match_id, player_id) - Quick goal lookups  
   â€¢ standings(season_id) - League table generation
   â€¢ player_stats(season_id) - Season statistics

ğŸ”„ Triggers:
   â€¢ Auto-update timestamps on row modifications
   â€¢ Maintains data consistency across updates
```

## Data Population Status

| Table | Records | Status | Notes |
|-------|---------|--------|-------|
| `seasons` | 34 | âœ… Complete | All PL seasons 1992/93-2025/26 |
| `teams` | 50+ | âœ… Complete | All historical PL teams |
| `matches` | 11,944 | âœ… Complete | 32 seasons of data |
| `goals` | 0 | ğŸ”„ Pending | Ready for goal scorer import |
| `players` | 0 | ğŸ”„ Pending | Schema ready for player data |
| `standings` | 0 | ğŸ”„ Live Calc | Generated via API from matches |
| `player_stats` | 0 | ğŸ”„ Pending | Awaiting player data import |
| `team_seasons` | 0 | ğŸ”„ Pending | Can be derived from matches |

This schema provides a robust foundation for comprehensive Premier League analysis while maintaining flexibility for future enhancements.